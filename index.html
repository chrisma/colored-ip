<!DOCTYPE html>
<html>
<head>
  <title>Colored IP</title>
  <!-- START Facebook OpenGraph -->
  <meta property="og:title" content="Colored IP"/>
  <meta property="og:site_name" content="Colored IP"/>
  <meta property="og:url" content="http://www.coloredip.cf"/>
  <meta property="og:description" content="Interpret your IP address as a color (in a variety of color models)."/>
  <meta property="og:image" content="http://coloredip.cf/colored_ip.png"/>
  <!-- END Facebook OpenGraph -->
  <!-- START Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@chrisma0">
  <meta name="twitter:title" content="Colored IP">
  <meta name="twitter:description" content="Interpret your IP address as a color (in a variety of color models).">
  <meta name="twitter:image:src" content="http://coloredip.cf/colored_ip.png">
  <!-- END Twitter Card -->
  <link rel="icon" href="favicon.ico">
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="stylesheet" type="text/css" href="OpenSans.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="lib/color-convert-0.5.1.min.js"></script>
  <script src="named_colors.js"></script>
</head>
<body>
  <noscript>
    <h1>This website requires Javascript to work :(</h1>
    <div>Don't worry though, there's nothing malicious here, check the source code on <a href="https://github.com/chrisma/colored-ip">Github</a>.</div><br>
  </noscript>

  <div class="section" id="rgb">
    <div class="label">
      <div class="title">
        <a href="http://en.wikipedia.org/wiki/RGB_color_model">RGB</a>
      </div>
      <div class="details">
        <table>
          <tbody>
            <tr>
              <td>(red,</td>
              <td>green,</td>    
              <td>blue)</td>
            </tr>
            <tr>
              <td class="red"></td>
              <td class="green"></td>    
              <td class="blue"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <span class="color_name" id="rgb_rgb"></span>
  </div>

  <div class="section" id="rgba">
    <div class="label">
      <div class="title">
        <a href="http://en.wikipedia.org/wiki/RGBA_color_space">RGBA</a>
      </div>
      <div class="details">
        <table>
          <tbody>
            <tr>
              <td>(red,</td>
              <td>green,</td>    
              <td>blue,</td>
              <td>alpha)</td>
            </tr>
            <tr>
              <td class="red"></td>
              <td class="green"></td>    
              <td class="blue"></td>
              <td class="alpha"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <span class="color_name" id="rgba_rgb"></span>
  </div>

  <div class="section" id="hsl">
    <div class="label">
      <div class="title">
        <a href="http://en.wikipedia.org/wiki/HSL_and_HSV">HSL</a>
      </div>
      <div class="details">
        <table>
          <tbody>
            <tr>
              <td>(hue,</td>
              <td>saturation,</td>    
              <td>lightness)</td>
            </tr>
            <tr>
              <td class="hue"></td>
              <td class="saturation"></td>    
              <td class="lightness"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <span class="color_name" id="hsl_rgb"></span>
  </div>

  <div class="section" id="hsla">
    <div class="label">
      <div class="title">
        <a href="http://www.w3.org/wiki/CSS3/Color/HSLA">HSLA</a>
      </div>
      <div class="details">
        <table>
          <tbody>
            <tr>
              <td>(hue,</td>
              <td>saturation,</td>    
              <td>lightness,</td>
              <td>alpha)</td>
            </tr>
            <tr>
              <td class="hue"></td>
              <td class="saturation"></td>    
              <td class="lightness"></td>
              <td class="alpha"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <span class="color_name" id="hsla_rgb"></span>
  </div>

  <div class="section" id="hsv">
    <div class="label">
      <div class="title">
        <a href="http://en.wikipedia.org/wiki/HSL_and_HSV">HSV</a>
      </div>
      <div class="details">
        <table>
          <tbody>
            <tr>
              <td>(hue,</td>
              <td>saturation,</td>    
              <td>value)</td>
            </tr>
            <tr>
              <td class="hue"></td>
              <td class="saturation"></td>    
              <td class="lightness"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <span class="color_name" id="hsv_rgb"></span>
  </div>

  <div class="section" id="hwb">
    <div class="label">
      <div class="title">
        <a href="http://en.wikipedia.org/wiki/HWB_color_model">HWB</a>
      </div>
      <div class="details">
        <table>
          <tbody>
            <tr>
              <td>(hue,</td>
              <td>whiteness,</td>    
              <td>blackness)</td>
            </tr>
            <tr>
              <td class="hue"></td>
              <td class="saturation"></td>    
              <td class="lightness"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <span class="color_name" id="hwb_rgb"></span>
  </div>

  <div class="section" id="cmyk">
    <div class="label">
      <div class="title">
        <a href="http://en.wikipedia.org/wiki/CMYK_color_model">CMYK</a>
      </div>
      <div class="details">
        <table>
          <tbody>
            <tr>
              <td>(cyan,</td>
              <td>magenta,</td>    
              <td>yellow,</td>
              <td>key)</td>
            </tr>
            <tr>
              <td class="cyan"></td>
              <td class="magenta"></td>    
              <td class="yellow"></td>
              <td class="key"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <span class="color_name" id="cmyk_rgb"></span>
  </div>

  <footer>By <a href="https://twitter.com/chrisma0">@chrisma0</a> | Hosted on <a href="https://github.com/chrisma/colored-ip">Github</a> | Your IPv4 address is: <span id="ip"></span></footer>
  <script>
    $(document).ready(function(){
      $.getJSON("http://api.ipify.org?format=json", function (data) {
          $("#ip").text(data.ip);
          var octets = data.ip.split('.').map(function(str){return parseInt(str);});
          percentages = octets.map(function(octet){return Math.round( (octet/255)*1000 ) / 1000;})
          
          //RGB
          var rgb = octets.slice(0,3);
          var rgbCss = 'rgb(' + rgb.join(',') + ')';
          $('#rgb').css('background-color', rgbCss);
          var closestRGB = closestColorName(rgb);
          $('#rgb_rgb').text(closestRGB.name);
          $('#rgb_rgb').css('color', getForegroundColor(rgb));
          $('.red').text(rgb[0]);
          $('.green').text(rgb[1]);
          $('.blue').text(rgb[2]);
          
          //RGBA
          var alpha = percentages[3];
          var rgbaCss = 'rgba(' + rgb.join(',') + ',' + alpha + ')';
          $('#rgba').css('background-color', rgbaCss);
          $('#rgba_rgb').text(closestRGB.name + ' with ' + alpha*100 + '% transparency.');
          $('#rgba_rgb').css('color', getForegroundColor(rgb, alpha));
          $('.alpha').text(alpha);
          
          //HSL
          //         hue (0-360),        saturation (0-100), lightness (0-100)
          var hsl = [percentages[0]*360, percentages[1]*100, percentages[2]*100];
          var hslInrgb = colorConvert.hsl2rgb(hsl).map(Math.round);
          $('#hsl').css('background-color', 'rgb(' + hslInrgb.join(',') + ')');
          var closestHSL = closestColorName(hslInrgb);
          $('#hsl_rgb').text(closestHSL.name);
          $('#hsl_rgb').css('color', getForegroundColor(hslInrgb));
          $('.hue').text(trunc(hsl[0]));
          $('.saturation').text(hsl[1] + '%');
          $('.lightness' ).text(hsl[2] + '%');
          
          //HSLA
          $('#hsla').css('background-color', 'rgba(' + hslInrgb.join(',') + ',' + alpha + ')');
          $('#hsla_rgb').text(closestHSL.name + ' with ' + alpha*100 + '% transparency.');
          $('#hsla_rgb').css('color', getForegroundColor(hslInrgb, alpha));

          //HSV
          var hsv = hsl //same structure, different semantics: hue, saturation, value
          hsvInrgb = colorConvert.hsv2rgb(hsv).map(Math.round);
          $('#hsv').css('background-color', 'rgb(' + hsvInrgb.join(',') + ')');
          var closestHSV = closestColorName(hsvInrgb);
          $('#hsv_rgb').text(closestHSV.name);
          $('#hsv_rgb').css('color', getForegroundColor(hsvInrgb));
          
          //HWB
          var hwb = hsl //same structure, different semantics: hue, whiteness, blackness
          hwbInrgb = colorConvert.hwb2rgb(hsv).map(Math.round);
          $('#hwb').css('background-color', 'rgb(' + hwbInrgb.join(',') + ')');
          var closestHWB = closestColorName(hwbInrgb);
          $('#hwb_rgb').text(closestHWB.name);
          $('#hwb_rgb').css('color', getForegroundColor(hwbInrgb));

          //CMYK
          var cmyk = percentages.map(function(p){return p*100;}); //CMYK is 4 values 0-100%
          cmykInrgb = colorConvert.cmyk2rgb(cmyk).map(Math.round);
          $('#cmyk').css('background-color', 'rgb(' + cmykInrgb.join(',') + ')');
          var closestCMYK = closestColorName(cmykInrgb);
          $('#cmyk_rgb').text(closestCMYK.name);
          $('#cmyk_rgb').css('color', getForegroundColor(cmykInrgb));
          $('.cyan').text(trunc(cmyk[0]) + '%');
          $('.magenta').text(cmyk[1] + '%');
          $('.yellow').text(cmyk[2] + '%');
          $('.key').text(cmyk[3] + '%');

      }).fail(function(){
          $('#debug').html('fail')
      });
    });

    function getForegroundColor(rgb, alpha) {
        var yiq = ((rgb[0]*299)+(rgb[1]*587)+(rgb[2]*114))/1000;
        if (yiq >= 128) {
           return 'black'
        }
        if (alpha) {
          return (alpha > 0.5) ? 'white': 'black';
        }
        return 'white'
    }

    function trunc(number) {
      return Math.round(number * 10) / 10
    }
  </script>
</body>
</html>
